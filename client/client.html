<!DOCTYPE html>
<html lang="en" ng-app="" ng-csp>
  <head>
    <title>elements client</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- <script src="/vendor/jquery/jquery.min.js" type="text/javascript"></script> -->
    <script src="/vendor/angularjs/angular.min.js"></script>
    <script src="state.js"></script>

    <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/vendor/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">

    <link href="style.css" rel="stylesheet">
  </head>

  <body>
    <div class="container">

      <section>

        <div class="row">
          <div ng-controller="stateCtrl">

            <div class="span10">

              <div class="alert alert-important" ng-show="state.won == 1 || state.won == -1">{{state.players[1].id}} won the game!</div>

              <table width="100%" style="min-height: 110px">
                <tr>
                  <td ng-repeat="card in getCardsInEnemyHand()">
                    <div class="tile well well-small player{{(state.currentPlayer+1)%2}}">
                      <p><span class="label label-inverse cardName">? ? ?</span></p>
                    </div>
                  </td>
                </tr>
              </table>

              <hr/>

              <table width="100%">
                <tr ng-repeat="row in state.board">
                  <td ng-repeat="tile in row" width="20%">

                    <div ng-switch on="tile.type">

                      <div ng-switch-when="unit" class="tile well well-small unit player{{tile.player}} selected-{{tile.selected}}" ng-click="selectUnit(tile)">
                        <p><span class="label label-inverse cardName">{{tile.name}}</span></p>
                        <p>
                          Attack: <span class="badge">{{tile.attack}}</span><br/>
                          Life: <span ng-show="tile.life < tile.maxLife" title="{{tile.life}}/{{tile.maxLife}}" class="badge badge-important">{{tile.life}}</span><span ng-show="tile.life == tile.maxLife" class="badge">{{tile.life}}</span>
                        </p>
                      </div>

                      <div ng-switch-when="energy" class="tile well well-small energy player{{tile.player}} selected-{{tile.selected}}" ng-click="selectEnergy(tile)">
                        <p><span class="label label-inverse cardName">{{tile.name}}</span></p>
                        <p>
                          Energy: <span class="badge">{{tile.energy}}</span><br/>
                          Life: <span ng-show="tile.life < tile.maxLife" title="{{tile.life}}/{{tile.maxLife}}" class="badge badge-important">{{tile.life}}</span><span ng-show="tile.life == tile.maxLife" class="badge">{{tile.life}}</span>
                        </p>
                      </div>

                      <div ng-switch-when="empty" class="tile well well-small empty" ng-click="selectEmpty(tile)">

                      </div>

                      <span ng-switch-default>N/A</span>

                    </div>

                  </td>
                </tr>
              </table>

              <hr/>

              <div class="alert alert-success" ng-show="state.won == 0 || state.won == -1">{{state.players[0].id}} won the game!</div>

              <table width="100%" style="min-height: 110px">
                <tr>
                  <td ng-repeat="card in getCardsInOwnHand()" ng-switch on="card.type" ng-click="selectCard(card)">

                    <div ng-switch-when="unit" class="tile well well-small player{{state.currentPlayer}} selected-{{card.selected}}">
                      <p><span class="label label-inverse cardName">{{card.name}}</span> <span class="badge badge-info">{{card.cost}}<span></p>
                      <p>
                        Attack: {{card.attack}}<br/>
                        Life: {{card.life}}
                      </p>
                    </div>

                    <div ng-switch-when="energy" class="tile well well-small energy player{{state.currentPlayer}} selected-{{card.selected}}">
                      <p><span class="label label-inverse cardName">{{card.name}}</span> <span class="badge badge-info">{{card.cost}}<span></p>
                      <p>
                        Energy: {{card.energy}}<br/>
                        Life: {{card.life}}
                      </p>
                    </div>

                    <div ng-switch-when="spell" class="tile well well-small spell player{{state.currentPlayer}} selected-{{card.selected}}">
                      <p><span class="label label-inverse cardName">{{card.name}}</span> <span class="badge badge-info">{{card.cost}}<span></p>
                      <p>
                        Spell description goes here
                      </p>
                    </div>

                  </td>
                </tr>
              </table>

            </div>

            <div class="span2">

              <select multiple="multiple" style="min-height: 600px">
                <option ng-repeat="action in state.actions">{{action.player}}: {{action.action}}</option>
              </select>

              <a href="#" class="btn btn-large btn-block btn-primary" ng-click="endTurn()">End turn</a>
              <a href="#" class="btn btn-large btn-block" ng-click="getState()">Showing action {{state.actionCount}}</a>
              <a href="#" class="btn btn-large btn-block" ng-click="playAllActions()">Play all actions</a>

            </div>

          </div>
        </div>

      </section>

    </div><!-- /container -->
  </body>
</html>
